<!doctype html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TH8.AI · Interactive KPI & ROI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <style>html,body{font-family:"Prompt",system-ui}</style>
</head>
<body class="bg-slate-50 text-slate-900">
<main class="max-w-6xl mx-auto p-6 space-y-6">

  <!-- Controls -->
  <section class="bg-white border rounded-2xl p-5 grid grid-cols-1 md:grid-cols-4 gap-4">
    <div>
      <label class="text-xs font-semibold text-slate-500">Pilot Cost (บาท)</label>
      <input id="pilotCost" type="number" value="500000" class="mt-1 w-full border rounded-xl px-3 py-2"/>
    </div>
    <div>
      <label class="text-xs font-semibold text-slate-500">Annual PO (Contract-based)</label>
      <input id="annualPO" type="number" value="300000000" class="mt-1 w-full border rounded-xl px-3 py-2"/>
    </div>
    <div>
      <label class="text-xs font-semibold text-slate-500">% PO มี Deviation</label>
      <input id="deviationPct" type="number" step="0.1" value="2.0" class="mt-1 w-full border rounded-xl px-3 py-2"/>
    </div>
    <div>
      <label class="text-xs font-semibold text-slate-500">% ป้องกันได้จริง</label>
      <input id="preventPct" type="number" step="1" value="25" class="mt-1 w-full border rounded-xl px-3 py-2"/>
    </div>
  </section>

  <!-- Decisions -->
  <section class="bg-white border rounded-2xl p-5">
    <p class="text-xs uppercase tracking-wider text-slate-500 font-semibold">Decisions (Demo)</p>
    <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-3">
      <button onclick="approve(9000)" class="px-4 py-3 rounded-xl bg-emerald-600 text-white font-semibold">Approve w/ Exception (+฿9,000)</button>
      <button onclick="reject(42000)" class="px-4 py-3 rounded-xl bg-red-600 text-white font-semibold">Reject (Avoid ฿42,000)</button>
      <button onclick="reject(185000)" class="px-4 py-3 rounded-xl bg-red-600 text-white font-semibold">Reject Out-of-Scope (Avoid ฿185,000)</button>
    </div>
  </section>

  <!-- KPI -->
  <section class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="bg-white border rounded-2xl p-5">
      <p class="text-xs text-slate-500 font-semibold">Prevented Leakage</p>
      <p id="prevented" class="text-2xl font-semibold mt-2">฿0</p>
    </div>
    <div class="bg-white border rounded-2xl p-5">
      <p class="text-xs text-slate-500 font-semibold">Amount at Risk (Est.)</p>
      <p id="risk" class="text-2xl font-semibold mt-2">฿0</p>
    </div>
    <div class="bg-white border rounded-2xl p-5">
      <p class="text-xs text-slate-500 font-semibold">Annual Benefit</p>
      <p id="benefit" class="text-2xl font-semibold mt-2">฿0</p>
    </div>
    <div class="bg-white border rounded-2xl p-5">
      <p class="text-xs text-slate-500 font-semibold">Payback</p>
      <p id="payback" class="text-2xl font-semibold mt-2">-</p>
    </div>
  </section>

</main>

<script>
let prevented = 0;

function calc(){
  const pilotCost = +pilotCostInput.value;
  const annualPO = +annualPOInput.value;
  const devPct = +deviationPctInput.value/100;
  const preventPct = +preventPctInput.value/100;

  const amountAtRisk = annualPO * devPct;
  const annualBenefit = amountAtRisk * preventPct;
  const paybackMonths = pilotCost>0 ? (pilotCost/annualBenefit)*12 : 0;

  risk.textContent = '฿' + amountAtRisk.toLocaleString();
  benefit.textContent = '฿' + annualBenefit.toLocaleString();
  payback.textContent = paybackMonths ? paybackMonths.toFixed(1)+' เดือน' : '-';
}
function approve(delta){ prevented += 0; update(); }
function reject(delta){ prevented += delta; update(); }

function update(){
  preventedEl.textContent = '฿' + prevented.toLocaleString();
  calc();
}

const pilotCostInput = document.getElementById('pilotCost');
const annualPOInput = document.getElementById('annualPO');
const deviationPctInput = document.getElementById('deviationPct');
const preventPctInput = document.getElementById('preventPct');
const preventedEl = document.getElementById('prevented');
const risk = document.getElementById('risk');
const benefit = document.getElementById('benefit');
const payback = document.getElementById('payback');

[pilotCostInput,annualPOInput,deviationPctInput,preventPctInput].forEach(i=>i.addEventListener('input',calc));
calc();
</script>
</body>
</html>

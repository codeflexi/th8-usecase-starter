<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>th8 Agentic UX Flows</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Prompt', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            dark: '#0F172A',
                            primary: '#06B6D4', // Cyan
                            secondary: '#8B5CF6', // Violet
                            success: '#10B981',
                            warning: '#F59E0B',
                            danger: '#EF4444',
                            surface: '#F8FAFC'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #F1F5F9; color: #1E293B; }
        .glass-card {
            background: white;
            border: 1px solid #E2E8F0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border-radius: 16px;
        }
        .btn-action {
            transition: all 0.2s;
        }
        .btn-action:active {
            transform: scale(0.98);
        }
        .flow-line {
            border-left: 2px dashed #CBD5E1;
            position: absolute;
            left: 24px;
            top: 40px;
            bottom: 0;
            z-index: 0;
        }
        .step-icon {
            z-index: 10;
        }
        /* Chart Container */
        .chart-container {
            position: relative;
            height: 150px;
            width: 100%;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col md:flex-row">

    <!-- Sidebar Nav -->
    <nav class="bg-brand-dark text-white w-full md:w-64 p-6 flex flex-col shrink-0">
        <div class="text-2xl font-bold mb-8 flex items-center gap-2">
            <div class="w-8 h-8 bg-brand-primary rounded-lg flex items-center justify-center">th8</div>
            <span>Flows</span>
        </div>
        
        <div class="space-y-4">
            <button onclick="switchFlow('replenish')" id="btn-replenish" class="w-full text-left p-3 rounded-xl bg-brand-primary/20 text-brand-primary border border-brand-primary font-medium flex items-center gap-3 transition-all">
                <i class="fas fa-boxes-stacked"></i>
                Auto-Replenishment
            </button>
            <button onclick="switchFlow('consolidate')" id="btn-consolidate" class="w-full text-left p-3 rounded-xl hover:bg-white/10 text-gray-400 font-medium flex items-center gap-3 transition-all">
                <i class="fas fa-coins"></i>
                Spend Consolidator
            </button>
        </div>

        <div class="mt-auto text-xs text-gray-500">
            UX Concept Demo v1.0
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 p-4 md:p-8 overflow-y-auto">
        
        <!-- FLOW 1: Auto-Replenishment -->
        <div id="flow-replenish" class="max-w-3xl mx-auto">
            <header class="mb-8">
                <h1 class="text-2xl font-bold text-brand-dark mb-2">1. Auto-Replenishment Agent</h1>
                <p class="text-gray-500">Scenario: สาขา "Siam Center" เมล็ดกาแฟกำลังจะหมดใน 2 วัน</p>
            </header>

            <div class="relative space-y-8 pl-4">
                <div class="flow-line"></div>

                <!-- Step 1: Trigger -->
                <div class="relative flex gap-6">
                    <div class="step-icon w-12 h-12 bg-brand-warning rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="glass-card p-6 w-full animate-fade-in-up">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg">Predictive Alert</h3>
                            <span class="text-xs bg-red-100 text-red-600 px-2 py-1 rounded font-bold">Urgent</span>
                        </div>
                        <p class="text-gray-600 mb-4">
                            "สาขา <strong>Siam Center</strong> มีความเสี่ยง Stockout เมล็ดกาแฟ Arabica ใน <strong>48 ชม.</strong> (Demand พุ่งสูงช่วง Weekend)"
                        </p>
                        <button onclick="showNextStep('rep-step2')" class="text-brand-primary font-bold text-sm hover:underline">
                            View Details <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 2: The Card (Context) -->
                <div id="rep-step2" class="relative flex gap-6 hidden opacity-0 transition-opacity duration-500">
                    <div class="step-icon w-12 h-12 bg-brand-primary rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="glass-card p-0 w-full overflow-hidden">
                        <div class="bg-gray-50 p-4 border-b border-gray-100 flex justify-between items-center">
                            <span class="font-bold text-gray-700">AI Proposed Action</span>
                            <span class="text-xs text-gray-500">Draft PO #AI-8821</span>
                        </div>
                        <div class="p-6">
                            <!-- Visual Evidence -->
                            <div class="flex flex-col md:flex-row gap-6 mb-6">
                                <div class="w-full md:w-1/2">
                                    <div class="text-xs text-gray-400 uppercase font-bold mb-2">Stock Prediction</div>
                                    <div class="chart-container">
                                        <canvas id="stockChart"></canvas>
                                    </div>
                                </div>
                                <div class="w-full md:w-1/2 flex flex-col justify-center">
                                    <div class="p-4 bg-brand-primary/5 rounded-xl border border-brand-primary/20">
                                        <div class="flex justify-between mb-2">
                                            <span class="text-sm text-gray-600">Item:</span>
                                            <span class="font-bold">Coffee Bean Arabica</span>
                                        </div>
                                        <div class="flex justify-between mb-2">
                                            <span class="text-sm text-gray-600">Current:</span>
                                            <span class="text-red-500 font-bold">5 Bags</span>
                                        </div>
                                        <div class="flex justify-between border-t border-dashed border-gray-300 pt-2 mt-2">
                                            <span class="text-sm text-brand-dark">Suggested Order:</span>
                                            <span class="text-brand-primary font-bold text-lg">20 Bags</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Actions -->
                            <div class="flex gap-3">
                                <button onclick="replenishAction()" id="btn-rep-action" class="btn-action flex-1 bg-brand-primary hover:bg-cyan-600 text-white py-3 rounded-xl font-bold shadow-lg shadow-cyan-500/20 flex items-center justify-center gap-2">
                                    <i class="fas fa-check-circle"></i> Approve PO (Auto-Send)
                                </button>
                                <button class="px-4 py-3 border border-gray-300 rounded-xl text-gray-500 font-bold hover:bg-gray-50">
                                    Edit
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Success -->
                <div id="rep-step3" class="relative flex gap-6 hidden opacity-0 transition-opacity duration-500">
                    <div class="step-icon w-12 h-12 bg-brand-success rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white">
                        <i class="fas fa-truck-fast"></i>
                    </div>
                    <div class="glass-card p-6 w-full border-l-4 border-brand-success">
                        <h3 class="font-bold text-lg text-brand-success mb-1">Replenishment Initiated!</h3>
                        <p class="text-gray-600 text-sm">
                            PO #AI-8821 sent to Supplier "Aroma Thai". <br>
                            Estimated Delivery: <strong>Tomorrow, 10:00 AM</strong>.
                        </p>
                        <button onclick="resetFlow('replenish')" class="mt-4 text-xs text-gray-400 underline">Reset Demo</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- FLOW 2: Spend Consolidator -->
        <div id="flow-consolidate" class="max-w-3xl mx-auto hidden">
            <header class="mb-8">
                <h1 class="text-2xl font-bold text-brand-dark mb-2">2. Spend Analysis & Consolidator</h1>
                <p class="text-gray-500">Scenario: 3 แผนก (IT, HR, Mkt) ต่างคนต่างขอซื้อ "กระดาษ A4"</p>
            </header>

            <div class="relative space-y-8 pl-4">
                <div class="flow-line"></div>

                <!-- Step 1: Discovery -->
                <div class="relative flex gap-6">
                    <div class="step-icon w-12 h-12 bg-brand-secondary rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white">
                        <i class="fas fa-search-dollar"></i>
                    </div>
                    <div class="glass-card p-6 w-full">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg">Savings Opportunity Found</h3>
                            <div class="bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold text-sm">
                                <i class="fas fa-arrow-down mr-1"></i> Save 15%
                            </div>
                        </div>
                        <p class="text-gray-600 mb-4">
                            "ตรวจพบคำขอซื้อ (PR) สินค้ากลุ่ม <strong>Office Supplies</strong> ที่ซ้ำซ้อนกันจาก 3 แผนก หากรวมยอดซื้อจะได้ราคา Tier 2"
                        </p>
                        <button onclick="showNextStep('con-step2')" class="text-brand-secondary font-bold text-sm hover:underline">
                            Analyze Requests <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Comparison -->
                <div id="con-step2" class="relative flex gap-6 hidden opacity-0 transition-opacity duration-500">
                    <div class="step-icon w-12 h-12 bg-brand-dark rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white">
                        <i class="fas fa-scale-balanced"></i>
                    </div>
                    <div class="glass-card p-0 w-full overflow-hidden">
                        <!-- Comparison Table -->
                        <div class="grid grid-cols-2 text-center border-b border-gray-200">
                            <div class="p-3 bg-gray-50 text-gray-500 font-bold text-sm">Current (Separate)</div>
                            <div class="p-3 bg-brand-secondary/10 text-brand-secondary font-bold text-sm">Consolidated (AI)</div>
                        </div>
                        <div class="grid grid-cols-2 divide-x divide-gray-200">
                            <!-- Left: Messy -->
                            <div class="p-6 space-y-3">
                                <div class="flex justify-between text-xs text-gray-500">
                                    <span>IT Dept:</span> <span>100 Reams @ ฿100</span>
                                </div>
                                <div class="flex justify-between text-xs text-gray-500">
                                    <span>HR Dept:</span> <span>200 Reams @ ฿95</span>
                                </div>
                                <div class="flex justify-between text-xs text-gray-500">
                                    <span>Mkt Dept:</span> <span>150 Reams @ ฿105</span>
                                </div>
                                <div class="border-t pt-2 flex justify-between font-bold text-gray-700">
                                    <span>Total Cost:</span> <span>฿44,750</span>
                                </div>
                            </div>
                            <!-- Right: Optimized -->
                            <div class="p-6 space-y-3 bg-brand-secondary/5 relative">
                                <div class="absolute top-2 right-2 text-brand-secondary text-xs font-bold border border-brand-secondary rounded px-1">Vendor A</div>
                                <div class="flex justify-between text-sm text-gray-800 font-medium pt-4">
                                    <span>Total Vol:</span> <span>450 Reams</span>
                                </div>
                                <div class="flex justify-between text-sm text-brand-secondary font-bold">
                                    <span>Bulk Price:</span> <span>@ ฿85</span>
                                </div>
                                <div class="border-t border-brand-secondary/20 pt-2 flex justify-between font-bold text-green-600 text-lg">
                                    <span>New Cost:</span> <span>฿38,250</span>
                                </div>
                                <div class="text-xs text-center bg-green-100 text-green-700 rounded py-1 font-bold">
                                    Saved: ฿6,500
                                </div>
                            </div>
                        </div>
                        <div class="p-4 bg-gray-50 border-t border-gray-200">
                            <button onclick="consolidateAction()" id="btn-con-action" class="btn-action w-full bg-brand-secondary hover:bg-violet-600 text-white py-3 rounded-xl font-bold shadow-lg shadow-violet-500/20 flex items-center justify-center gap-2">
                                <i class="fas fa-object-group"></i> Consolidate & Issue Single PO
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Success -->
                <div id="con-step3" class="relative flex gap-6 hidden opacity-0 transition-opacity duration-500">
                    <div class="step-icon w-12 h-12 bg-brand-success rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white">
                        <i class="fas fa-file-invoice-dollar"></i>
                    </div>
                    <div class="glass-card p-6 w-full border-l-4 border-brand-success">
                        <h3 class="font-bold text-lg text-brand-success mb-1">Orders Consolidated!</h3>
                        <p class="text-gray-600 text-sm">
                            3 PRs canceled. <br>
                            <strong>1 New PO (#AI-9902)</strong> created for Vendor A @ ฿85/unit.
                        </p>
                        <button onclick="resetFlow('consolidate')" class="mt-4 text-xs text-gray-400 underline">Reset Demo</button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- Navigation Logic ---
        function switchFlow(flow) {
            // Hide all
            document.getElementById('flow-replenish').classList.add('hidden');
            document.getElementById('flow-consolidate').classList.add('hidden');
            
            // Reset Nav Styles
            document.getElementById('btn-replenish').className = "w-full text-left p-3 rounded-xl hover:bg-white/10 text-gray-400 font-medium flex items-center gap-3 transition-all";
            document.getElementById('btn-consolidate').className = "w-full text-left p-3 rounded-xl hover:bg-white/10 text-gray-400 font-medium flex items-center gap-3 transition-all";

            // Show Target & Active Style
            document.getElementById(`flow-${flow}`).classList.remove('hidden');
            
            const activeBtnClass = "w-full text-left p-3 rounded-xl bg-brand-primary/20 text-brand-primary border border-brand-primary font-medium flex items-center gap-3 transition-all";
            document.getElementById(`btn-${flow}`).className = activeBtnClass.replace('brand-primary', flow === 'consolidate' ? 'brand-secondary' : 'brand-primary'); // Simple color swap logic for demo

            // Initialize Charts if needed
            if(flow === 'replenish') {
                renderStockChart();
            }
        }

        // --- Step Logic ---
        function showNextStep(stepId) {
            const el = document.getElementById(stepId);
            el.classList.remove('hidden');
            // Small delay for fade in
            setTimeout(() => {
                el.classList.remove('opacity-0');
            }, 50);
        }

        function replenishAction() {
            const btn = document.getElementById('btn-rep-action');
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Processing...';
            setTimeout(() => {
                showNextStep('rep-step3');
                btn.innerHTML = '<i class="fas fa-check-circle"></i> Approved';
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            }, 1000);
        }

        function consolidateAction() {
            const btn = document.getElementById('btn-con-action');
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Merging Orders...';
            setTimeout(() => {
                showNextStep('con-step3');
                btn.innerHTML = '<i class="fas fa-check-circle"></i> Consolidated';
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            }, 1000);
        }

        function resetFlow(type) {
            if(type === 'replenish') {
                document.getElementById('rep-step2').classList.add('hidden', 'opacity-0');
                document.getElementById('rep-step3').classList.add('hidden', 'opacity-0');
                document.getElementById('btn-rep-action').innerHTML = '<i class="fas fa-check-circle"></i> Approve PO (Auto-Send)';
                document.getElementById('btn-rep-action').classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                document.getElementById('con-step2').classList.add('hidden', 'opacity-0');
                document.getElementById('con-step3').classList.add('hidden', 'opacity-0');
                document.getElementById('btn-con-action').innerHTML = '<i class="fas fa-object-group"></i> Consolidate & Issue Single PO';
                document.getElementById('btn-con-action').classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        // --- Chart Logic ---
        let stockChartInstance = null;
        function renderStockChart() {
            if(stockChartInstance) return; // Already rendered
            
            const ctx = document.getElementById('stockChart').getContext('2d');
            stockChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [
                        {
                            label: 'Stock Level',
                            data: [50, 40, 30, 20, 5, 0, 0], // Dips to 0 on Sat
                            borderColor: '#EF4444',
                            borderWidth: 2,
                            pointRadius: 3,
                            fill: false
                        },
                        {
                            label: 'Predicted Demand',
                            data: [10, 10, 10, 15, 25, 30, 30], // High demand weekend
                            borderColor: '#06B6D4',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true, labels: { boxWidth: 10 } } },
                    scales: {
                        y: { display: false },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
           // Default flow
           renderStockChart();
        });

    </script>
</body>
</html>
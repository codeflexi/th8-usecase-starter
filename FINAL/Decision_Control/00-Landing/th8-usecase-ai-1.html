<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>th8 AI Manager - Full Suite Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Prompt', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            dark: '#0F172A',
                            primary: '#06B6D4', // Cyan (Retail)
                            secondary: '#8B5CF6', // Violet (Consolidator)
                            medical: '#EF4444', // Red (Expiry Risk)
                            factory: '#F59E0B', // Amber (Sourcing)
                            success: '#10B981',
                            surface: '#F8FAFC'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #F1F5F9; color: #1E293B; }
        .glass-card {
            background: white;
            border: 1px solid #E2E8F0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border-radius: 16px;
        }
        .btn-action { transition: all 0.2s; }
        .btn-action:active { transform: scale(0.98); }
        .flow-line {
            border-left: 2px dashed #CBD5E1;
            position: absolute;
            left: 24px; top: 40px; bottom: 0; z-index: 0;
        }
        .step-icon { z-index: 10; }
        .chart-container { position: relative; height: 150px; width: 100%; }
        
        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-up { animation: fadeInUp 0.5s ease-out forwards; }
        
        .nav-btn.active {
            background-color: rgba(255,255,255,0.1);
            border-left: 4px solid;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col md:flex-row">

    <!-- Sidebar -->
    <nav class="bg-brand-dark text-white w-full md:w-72 p-6 flex flex-col shrink-0">
        <div class="text-2xl font-bold mb-8 flex items-center gap-2">
            <div class="w-8 h-8 bg-white text-brand-dark rounded-lg flex items-center justify-center font-black">th8</div>
            <span>AI Manager</span>
        </div>
        
        <div class="space-y-2">
            <div class="text-xs text-gray-500 uppercase font-bold ml-2 mb-1">Growth & Retail</div>
            <button onclick="switchFlow('replenish')" id="nav-replenish" class="nav-btn w-full text-left p-3 rounded-r-xl border-brand-primary hover:bg-white/5 text-gray-300 font-medium flex items-center gap-3 transition-all active">
                <i class="fas fa-boxes-stacked text-brand-primary"></i> Auto-Replenish
            </button>
            <button onclick="switchFlow('consolidate')" id="nav-consolidate" class="nav-btn w-full text-left p-3 rounded-r-xl border-brand-secondary hover:bg-white/5 text-gray-300 font-medium flex items-center gap-3 transition-all">
                <i class="fas fa-coins text-brand-secondary"></i> Spend Consolidator
            </button>

            <div class="text-xs text-gray-500 uppercase font-bold ml-2 mb-1 mt-6">Healthcare & Factory</div>
            <button onclick="switchFlow('expiry')" id="nav-expiry" class="nav-btn w-full text-left p-3 rounded-r-xl border-brand-medical hover:bg-white/5 text-gray-300 font-medium flex items-center gap-3 transition-all">
                <i class="fas fa-prescription-bottle-medical text-brand-medical"></i> Expiry Optimizer
            </button>
            <button onclick="switchFlow('sourcing')" id="nav-sourcing" class="nav-btn w-full text-left p-3 rounded-r-xl border-brand-factory hover:bg-white/5 text-gray-300 font-medium flex items-center gap-3 transition-all">
                <i class="fas fa-industry text-brand-factory"></i> Smart Sourcing
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 p-4 md:p-8 overflow-y-auto">
        
        <!-- FLOW 1: Auto-Replenishment -->
        <div id="flow-replenish" class="max-w-3xl mx-auto animate-up">
            <header class="mb-8 border-b pb-4">
                <h1 class="text-2xl font-bold text-gray-800">1. Auto-Replenishment Agent</h1>
                <p class="text-gray-500">Target: Retail, Franchise (เต่าบิน, ร้านอาหาร)</p>
            </header>

            <div class="relative space-y-8 pl-4">
                <div class="flow-line"></div>
                <!-- Step 1 -->
                <div class="relative flex gap-6">
                    <div class="step-icon w-12 h-12 bg-brand-primary rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-bell"></i></div>
                    <div class="glass-card p-6 w-full">
                        <h3 class="font-bold text-lg mb-1">Stockout Alert</h3>
                        <p class="text-gray-600 mb-4">"สาขา <strong>Siam Center</strong> มีความเสี่ยง Stockout เมล็ดกาแฟใน <strong>48 ชม.</strong>"</p>
                        <button onclick="showStep('rep-step2')" class="text-brand-primary font-bold text-sm hover:underline">View Proposal <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                <!-- Step 2 -->
                <div id="rep-step2" class="relative flex gap-6 hidden">
                    <div class="step-icon w-12 h-12 bg-brand-dark rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-robot"></i></div>
                    <div class="glass-card p-0 w-full overflow-hidden">
                        <div class="p-6">
                            <div class="flex gap-4 mb-4">
                                <div class="w-1/2 chart-container"><canvas id="repChart"></canvas></div>
                                <div class="w-1/2 flex flex-col justify-center bg-gray-50 p-4 rounded-xl">
                                    <div class="text-sm text-gray-500">Current Stock: <span class="text-red-500 font-bold">5 Bags</span></div>
                                    <div class="text-lg font-bold text-brand-primary mt-2">Suggest: +20 Bags</div>
                                </div>
                            </div>
                            <button onclick="finishStep('rep', 'PO Sent to Aroma Thai')" class="btn-action w-full bg-brand-primary text-white py-3 rounded-xl font-bold shadow-lg">Approve PO</button>
                        </div>
                    </div>
                </div>
                <!-- Step 3 -->
                <div id="rep-step3" class="relative flex gap-6 hidden">
                    <div class="step-icon w-12 h-12 bg-brand-success rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-check"></i></div>
                    <div class="glass-card p-6 w-full border-l-4 border-brand-success">
                        <h3 class="font-bold text-green-600">Replenishment Success!</h3>
                        <p id="rep-msg" class="text-sm text-gray-500"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- FLOW 2: Spend Consolidator -->
        <div id="flow-consolidate" class="max-w-3xl mx-auto hidden animate-up">
            <header class="mb-8 border-b pb-4">
                <h1 class="text-2xl font-bold text-gray-800">2. Spend Analysis & Consolidator</h1>
                <p class="text-gray-500">Target: Hotel, Office, Fashion (ของจุกจิกเยอะ)</p>
            </header>

            <div class="relative space-y-8 pl-4">
                <div class="flow-line"></div>
                <!-- Step 1 -->
                <div class="relative flex gap-6">
                    <div class="step-icon w-12 h-12 bg-brand-secondary rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-search-dollar"></i></div>
                    <div class="glass-card p-6 w-full">
                        <div class="flex justify-between">
                            <h3 class="font-bold text-lg mb-1">Savings Opportunity</h3>
                            <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-bold">Save 15%</span>
                        </div>
                        <p class="text-gray-600 mb-4">"พบคำขอซื้อ (PR) <strong>Office Supplies</strong> ซ้ำซ้อนจาก 3 แผนก รวมกันจะได้ราคาส่ง"</p>
                        <button onclick="showStep('con-step2')" class="text-brand-secondary font-bold text-sm hover:underline">Consolidate Now <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                <!-- Step 2 -->
                <div id="con-step2" class="relative flex gap-6 hidden">
                    <div class="step-icon w-12 h-12 bg-brand-dark rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-scale-balanced"></i></div>
                    <div class="glass-card p-0 w-full overflow-hidden">
                        <div class="grid grid-cols-2 divide-x">
                            <div class="p-4 space-y-2">
                                <div class="text-xs font-bold text-gray-400">SEPARATE (NOW)</div>
                                <div class="text-sm">IT: 100 @ ฿100</div>
                                <div class="text-sm">HR: 200 @ ฿95</div>
                                <div class="font-bold text-red-500">Total: ฿29,000</div>
                            </div>
                            <div class="p-4 space-y-2 bg-brand-secondary/5">
                                <div class="text-xs font-bold text-brand-secondary">CONSOLIDATED (AI)</div>
                                <div class="text-sm">Total: 300 Units</div>
                                <div class="text-sm">Bulk Rate: @ ฿85</div>
                                <div class="font-bold text-green-600">New Total: ฿25,500</div>
                            </div>
                        </div>
                        <div class="p-4 border-t">
                            <button onclick="finishStep('con', '3 PRs Merged into PO #AI-992')" class="btn-action w-full bg-brand-secondary text-white py-3 rounded-xl font-bold shadow-lg">Merge & Issue PO</button>
                        </div>
                    </div>
                </div>
                <!-- Step 3 -->
                <div id="con-step3" class="relative flex gap-6 hidden">
                    <div class="step-icon w-12 h-12 bg-brand-success rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-check"></i></div>
                    <div class="glass-card p-6 w-full border-l-4 border-brand-success">
                        <h3 class="font-bold text-green-600">Consolidation Complete!</h3>
                        <p id="con-msg" class="text-sm text-gray-500"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- FLOW 3: Expiry Optimizer -->
        <div id="flow-expiry" class="max-w-3xl mx-auto hidden animate-up">
            <header class="mb-8 border-b pb-4">
                <h1 class="text-2xl font-bold text-gray-800">3. Expiry & Inventory Optimizer</h1>
                <p class="text-gray-500">Target: Healthcare, Hospital (ยาใกล้หมดอายุ)</p>
            </header>

            <div class="relative space-y-8 pl-4">
                <div class="flow-line"></div>
                <!-- Step 1 -->
                <div class="relative flex gap-6">
                    <div class="step-icon w-12 h-12 bg-brand-medical rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-calendar-xmark"></i></div>
                    <div class="glass-card p-6 w-full">
                        <div class="flex justify-between mb-2">
                            <h3 class="font-bold text-lg text-brand-medical">Expiry Risk Detected</h3>
                            <span class="bg-red-100 text-red-600 px-2 py-1 rounded text-xs font-bold">Critical</span>
                        </div>
                        <p class="text-gray-600 mb-4">
                            "ยา <strong>Augmentin (500mg)</strong> ล็อต #B882 จำนวน 500 กล่อง จะหมดอายุใน <strong>60 วัน</strong> แต่ยอดใช้ใน Ward ปัจจุบันต่ำมาก"
                        </p>
                        <button onclick="showStep('exp-step2')" class="text-brand-medical font-bold text-sm hover:underline">See Solution <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                <!-- Step 2 -->
                <div id="exp-step2" class="relative flex gap-6 hidden">
                    <div class="step-icon w-12 h-12 bg-brand-dark rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-hospital-user"></i></div>
                    <div class="glass-card p-0 w-full overflow-hidden">
                        <div class="p-6">
                            <div class="flex gap-4 mb-4">
                                <div class="w-1/2 chart-container"><canvas id="expChart"></canvas></div>
                                <div class="w-1/2 flex flex-col justify-center gap-3">
                                    <div class="p-3 bg-red-50 border border-red-100 rounded text-xs text-red-700">
                                        <strong>Current Loc:</strong> IPD Ward 4<br>
                                        (Usage: 2 boxes/day) -> <span class="font-bold">Won't finish!</span>
                                    </div>
                                    <div class="p-3 bg-green-50 border border-green-100 rounded text-xs text-green-700">
                                        <strong>Suggested:</strong> OPD Pharmacy<br>
                                        (Usage: 50 boxes/day) -> <span class="font-bold">Clear in 10 days</span>
                                    </div>
                                </div>
                            </div>
                            <button onclick="finishStep('exp', 'Transfer Request #TR-102 Approved. Porters notified.')" class="btn-action w-full bg-brand-medical text-white py-3 rounded-xl font-bold shadow-lg shadow-red-500/20">
                                <i class="fas fa-dolly"></i> Transfer to OPD
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Step 3 -->
                <div id="exp-step3" class="relative flex gap-6 hidden">
                    <div class="step-icon w-12 h-12 bg-brand-success rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-check"></i></div>
                    <div class="glass-card p-6 w-full border-l-4 border-brand-success">
                        <h3 class="font-bold text-green-600">Risk Mitigated!</h3>
                        <p id="exp-msg" class="text-sm text-gray-500"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- FLOW 4: Smart Sourcing -->
        <div id="flow-sourcing" class="max-w-3xl mx-auto hidden animate-up">
            <header class="mb-8 border-b pb-4">
                <h1 class="text-2xl font-bold text-gray-800">4. Smart Sourcing & Commodity Tracker</h1>
                <p class="text-gray-500">Target: Manufacturing (โรงงาน, ส่งออก)</p>
            </header>

            <div class="relative space-y-8 pl-4">
                <div class="flow-line"></div>
                <!-- Step 1 -->
                <div class="relative flex gap-6">
                    <div class="step-icon w-12 h-12 bg-brand-factory rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-arrow-trend-down"></i></div>
                    <div class="glass-card p-6 w-full">
                        <div class="flex justify-between mb-2">
                            <h3 class="font-bold text-lg text-brand-factory">Market Price Drop</h3>
                            <span class="bg-amber-100 text-amber-700 px-2 py-1 rounded text-xs font-bold">Opportunity</span>
                        </div>
                        <p class="text-gray-600 mb-4">
                            "ราคาเม็ดพลาสติก (Resin) ตลาดโลกร่วงลงมาแตะ <strong>$1,200/Ton</strong> (Target Price ของเรา) แล้ว"
                        </p>
                        <button onclick="showStep('src-step2')" class="text-brand-factory font-bold text-sm hover:underline">Check Savings <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                <!-- Step 2 -->
                <div id="src-step2" class="relative flex gap-6 hidden">
                    <div class="step-icon w-12 h-12 bg-brand-dark rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-calculator"></i></div>
                    <div class="glass-card p-0 w-full overflow-hidden">
                        <div class="p-6">
                            <div class="chart-container mb-4" style="height: 180px;"><canvas id="srcChart"></canvas></div>
                            <div class="flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-200 mb-4">
                                <div class="text-sm">
                                    <div class="text-gray-500">Current Contract:</div>
                                    <div class="font-bold line-through text-gray-400">$1,350 / Ton</div>
                                </div>
                                <div class="text-sm text-right">
                                    <div class="text-gray-500">Spot Price (Now):</div>
                                    <div class="font-bold text-green-600 text-lg">$1,200 / Ton</div>
                                </div>
                            </div>
                            <div class="text-center text-xs text-gray-400 mb-4">Est. Savings on 100 Tons: <span class="text-green-600 font-bold">$15,000 (฿500,000)</span></div>
                            <button onclick="finishStep('src', 'PO Locked at $1,200/Ton with Supplier B.')" class="btn-action w-full bg-brand-factory text-white py-3 rounded-xl font-bold shadow-lg shadow-amber-500/20">
                                <i class="fas fa-lock"></i> Lock Price & Issue PO
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Step 3 -->
                <div id="src-step3" class="relative flex gap-6 hidden">
                    <div class="step-icon w-12 h-12 bg-brand-success rounded-full flex items-center justify-center text-white text-xl shrink-0 shadow-lg ring-4 ring-white"><i class="fas fa-check"></i></div>
                    <div class="glass-card p-6 w-full border-l-4 border-brand-success">
                        <h3 class="font-bold text-green-600">Cost Locked!</h3>
                        <p id="src-msg" class="text-sm text-gray-500"></p>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- Navigation ---
        function switchFlow(id) {
            // Hide all
            ['replenish', 'consolidate', 'expiry', 'sourcing'].forEach(f => {
                document.getElementById('flow-' + f).classList.add('hidden');
                document.getElementById('nav-' + f).classList.remove('active', 'border-l-4', 'bg-white/10');
            });
            
            // Show Target
            const target = document.getElementById('flow-' + id);
            target.classList.remove('hidden');
            target.classList.add('animate-up');
            
            // Highlight Nav
            const btn = document.getElementById('nav-' + id);
            btn.classList.add('active');

            // Init Charts specific to flow
            if(id === 'replenish') renderReplenishChart();
            if(id === 'expiry') renderExpiryChart();
            if(id === 'sourcing') renderSourcingChart();
        }

        // --- Step Logic ---
        function showStep(id) {
            const el = document.getElementById(id);
            el.classList.remove('hidden');
            el.classList.add('animate-up');
        }

        function finishStep(prefix, msg) {
            const btn = document.querySelector(`#${prefix}-step2 .btn-action`);
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                showStep(prefix + '-step3');
                document.getElementById(prefix + '-msg').innerHTML = msg;
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            }, 800);
        }

        // --- Charts ---
        let repChart, expChart, srcChart;

        function renderReplenishChart() {
            if(repChart) return;
            const ctx = document.getElementById('repChart').getContext('2d');
            repChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['M','T','W','Th','F','S'],
                    datasets: [{
                        label: 'Stock', data: [50,40,30,20,5,0],
                        borderColor: '#EF4444', borderWidth: 2, tension: 0.4
                    }, {
                        label: 'Demand', data: [10,10,10,15,30,40],
                        borderColor: '#06B6D4', borderDash: [5,5], borderWidth: 2
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
            });
        }

        function renderExpiryChart() {
            if(expChart) return;
            const ctx = document.getElementById('expChart').getContext('2d');
            expChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Current Ward', 'OPD (Suggest)'],
                    datasets: [{
                        label: 'Daily Usage Rate',
                        data: [2, 50],
                        backgroundColor: ['#EF4444', '#10B981']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
            });
        }

        function renderSourcingChart() {
            if(srcChart) return;
            const ctx = document.getElementById('srcChart').getContext('2d');
            srcChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Now'],
                    datasets: [{
                        label: 'Global Price ($)',
                        data: [1400, 1380, 1350, 1300, 1250, 1200],
                        borderColor: '#F59E0B', backgroundColor: 'rgba(245, 158, 11, 0.1)', fill: true, tension: 0.3
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            switchFlow('replenish'); // Start with first flow
        });
    </script>
</body>
</html>